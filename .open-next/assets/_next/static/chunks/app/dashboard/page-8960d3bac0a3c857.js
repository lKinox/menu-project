(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{1683:(e,s,l)=>{Promise.resolve().then(l.bind(l,8332))},8332:(e,s,l)=>{"use strict";l.r(s),l.d(s,{default:()=>w});var a=l(5155),r=l(2115),c=l(6874),i=l.n(c),n=l(6766),t=l(5695),d=l(285),o=l(6695),h=l(4165),x=l(2523),m=l(5127),j=l(4838),u=l(4616),p=l(9946);let f=(0,p.A)("search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var N=l(4020);let g=(0,p.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);var v=l(4126),b=l(3125);function w(){let e=(0,t.useRouter)(),[s,l]=(0,r.useState)(""),[c,p]=(0,r.useState)(null),[w,y]=(0,r.useState)(!1),[C,E]=(0,r.useState)("table"),[k,A]=(0,r.useState)([]),$=async()=>{try{let e=await fetch("/api/products");if(e.ok){let s=await e.json();A(s)}else console.error("Error al obtener productos:",e.statusText)}catch(e){console.error("Error en la solicitud:",e)}};(0,r.useEffect)(()=>{$()},[]),console.log(k);let P=k.filter(e=>e.name.toLowerCase().includes(s.toLowerCase())||e.description.toLowerCase().includes(s.toLowerCase())),T=async()=>{if(null!==c)try{let e=await fetch("/api/products/edit/".concat(c),{method:"DELETE"});e.ok?(A(k.filter(e=>e.id!==c)),b.P.success("\xa1Producto eliminado correctamente!",{duration:4e3,progress:!1,position:"top-left",transition:"popUp",icon:"",sound:!1}),console.log("Producto eliminado con \xe9xito")):console.error("Error al eliminar el producto:",e.statusText)}catch(e){console.error("Error en la solicitud de eliminaci\xf3n:",e)}finally{p(null),y(!1)}},S=e=>{p(e),y(!0)},_=async()=>{try{let s=await fetch("/api/cookie/delete",{method:"GET",credentials:"include"});s.ok?e.push("/"):console.error("Error al cerrar sesi\xf3n:",s.statusText)}catch(e){console.error("Error en la solicitud de cierre de sesi\xf3n:",e)}};return(0,a.jsxs)("div",{className:"flex min-h-screen flex-col",children:[(0,a.jsx)("header",{className:"border-b bg-white",children:(0,a.jsxs)("div",{className:"container mx-auto flex items-center justify-between px-4 py-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold md:text-2xl",children:"Panel de Administraci\xf3n"}),(0,a.jsxs)("nav",{className:"flex items-center gap-4",children:[(0,a.jsx)(i(),{href:"/",className:"text-sm text-slate-600 hover:text-slate-900",children:"Ver Tienda"}),(0,a.jsx)(d.$,{size:"sm",variant:"outline",onClick:_,children:"Salir"})]})]})}),(0,a.jsx)("div",{className:"border-b bg-white px-3 py-3 w-full",children:(0,a.jsxs)("div",{className:"flex justify-center gap-3",children:[(0,a.jsx)(d.$,{asChild:!0,children:(0,a.jsx)(i(),{href:"/dashboard",children:"Productos"})}),(0,a.jsx)(d.$,{asChild:!0,children:(0,a.jsx)(i(),{href:"/dashboard/category",children:"Categor\xedas"})}),(0,a.jsx)(d.$,{asChild:!0,children:(0,a.jsx)(i(),{href:"/dashboard/company",children:"Empresa"})})]})}),(0,a.jsx)("main",{className:"flex-1 bg-slate-50 py-8",children:(0,a.jsxs)("div",{className:"container mx-auto px-4",children:[(0,a.jsxs)("div",{className:"mb-8 flex flex-col justify-between gap-4 sm:flex-row sm:items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold",children:"Productos"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Gestiona los productos de tu cat\xe1logo"})]}),(0,a.jsx)(d.$,{asChild:!0,children:(0,a.jsxs)(i(),{href:"/dashboard/create",children:[(0,a.jsx)(u.A,{className:"mr-2 h-4 w-4"})," A\xf1adir Producto"]})})]}),(0,a.jsx)(o.Zp,{className:"mb-8",children:(0,a.jsx)(o.Wu,{className:"p-4 pt-4",children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[(0,a.jsxs)("div",{className:"relative w-full max-w-sm",children:[(0,a.jsx)(f,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-slate-400"}),(0,a.jsx)(x.p,{type:"search",placeholder:"Buscar productos...",className:"pl-8",value:s,onChange:e=>l(e.target.value)})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(d.$,{variant:"table"===C?"default":"outline",size:"sm",onClick:()=>E("table"),children:"Tabla"}),(0,a.jsx)(d.$,{variant:"grid"===C?"default":"outline",size:"sm",onClick:()=>E("grid"),children:"Cuadr\xedcula"})]})]})})}),"table"===C&&(0,a.jsx)(o.Zp,{children:(0,a.jsx)(o.Wu,{className:"p-0",children:(0,a.jsxs)(m.XI,{children:[(0,a.jsx)(m.A0,{children:(0,a.jsxs)(m.Hj,{children:[(0,a.jsx)(m.nd,{className:"w-[80px]",children:"Imagen"}),(0,a.jsx)(m.nd,{children:"Nombre"}),(0,a.jsx)(m.nd,{className:"hidden md:table-cell",children:"Descripci\xf3n"}),(0,a.jsx)(m.nd,{children:"Precio"}),(0,a.jsx)(m.nd,{className:"w-[100px] text-right",children:"Acciones"})]})}),(0,a.jsx)(m.BF,{children:0===P.length?(0,a.jsx)(m.Hj,{children:(0,a.jsx)(m.nA,{colSpan:6,className:"h-24 text-center",children:"No se encontraron productos."})}):P.map(s=>(0,a.jsxs)(m.Hj,{children:[(0,a.jsx)(m.nA,{children:(0,a.jsx)("div",{className:"relative h-10 w-10 overflow-hidden rounded-md",children:(0,a.jsx)(n.default,{src:s.img,alt:s.name,fill:!0,className:"object-cover"})})}),(0,a.jsx)(m.nA,{children:s.name}),(0,a.jsx)(m.nA,{className:"hidden max-w-xs truncate md:table-cell",children:s.description}),(0,a.jsxs)(m.nA,{children:["$ ",s.price]}),(0,a.jsx)(m.nA,{className:"text-right",children:(0,a.jsxs)(j.rI,{children:[(0,a.jsx)(j.ty,{asChild:!0,children:(0,a.jsxs)(d.$,{variant:"ghost",size:"icon",children:[(0,a.jsx)(N.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Abrir men\xfa"})]})}),(0,a.jsxs)(j.SQ,{align:"end",children:[(0,a.jsx)(j.lp,{children:"Acciones"}),(0,a.jsx)(j.mB,{}),(0,a.jsxs)(j._2,{onClick:()=>e.push("dashboard/edit/".concat(s.id)),children:[(0,a.jsx)(g,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,a.jsxs)(j._2,{className:"text-red-600 focus:text-red-600",onClick:()=>S(s.id),children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]})]})})]},s.id))})]})})}),"grid"===C&&(0,a.jsx)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",children:0===P.length?(0,a.jsx)("div",{className:"col-span-full py-12 text-center",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"No se encontraron productos."})}):P.map(s=>(0,a.jsxs)(o.Zp,{children:[(0,a.jsx)("div",{className:"relative aspect-square overflow-hidden",children:(0,a.jsx)(n.default,{src:s.img,alt:s.name,fill:!0,className:"object-cover transition-all hover:scale-105"})}),(0,a.jsxs)(o.aR,{className:"p-4 pb-0",children:[(0,a.jsx)(o.ZB,{className:"text-lg",children:s.name}),(0,a.jsx)(o.BT,{className:"line-clamp-2",children:s.description})]}),(0,a.jsx)(o.Wu,{className:"p-4 pt-2",children:(0,a.jsx)("p",{className:"font-medium",children:s.price})}),(0,a.jsxs)(o.wL,{className:"flex justify-between p-4 pt-0",children:[(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>e.push("/editar-producto/".concat(s.id)),children:[(0,a.jsx)(g,{className:"mr-2 h-4 w-4"}),"Editar"]}),(0,a.jsxs)(d.$,{variant:"outline",size:"sm",onClick:()=>S(s.id),children:[(0,a.jsx)(v.A,{className:"mr-2 h-4 w-4"}),"Eliminar"]})]})]},s.id))})]})}),(0,a.jsx)("footer",{className:"border-t bg-white py-6",children:(0,a.jsx)("div",{className:"container mx-auto px-4 text-center text-sm text-slate-600",children:(0,a.jsxs)("p",{children:["\xa9 ",new Date().getFullYear()," Tu Empresa. Panel de Administraci\xf3n."]})})}),(0,a.jsx)(h.lG,{open:w,onOpenChange:y,children:(0,a.jsxs)(h.Cf,{children:[(0,a.jsxs)(h.c7,{children:[(0,a.jsx)(h.L3,{children:"Confirmar eliminaci\xf3n"}),(0,a.jsx)(h.rr,{children:"\xbfEst\xe1s seguro de que deseas eliminar este producto? Esta acci\xf3n no se puede deshacer."})]}),(0,a.jsxs)(h.Es,{children:[(0,a.jsx)(d.$,{variant:"outline",onClick:()=>y(!1),children:"Cancelar"}),(0,a.jsx)(d.$,{variant:"destructive",onClick:T,children:"Eliminar"})]})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[415,179,644,9,723,781,766,480,441,317,358],()=>s(1683)),_N_E=e.O()}]);